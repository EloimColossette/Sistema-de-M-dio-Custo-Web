/* ===========================================
   ESTILO EXCLUSIVO PARA CÁLCULO DE NFs (COM FUNDO BRANCO)
   =========================================== */

/* Tipografia + Reset simples */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

:root {
  /* valor padrão; o JS pode sobrescrever com ajuste fino */
  --card-overlap: 12px;
  --card-add-padding-vertical: 12px;
  --input-height: 36px;
}

/* =========================
   Corpo e background = branco
   ========================= */
html, body {
  height: 100%;
  overflow: hidden;
  background-color: #ffffff; /* ← fundo branco de toda a janela */
  color: #333;
}

/* garante que o container principal também tenha fundo branco */
#calc-nfs-page {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background-color: #ffffff; /* reforça fundo branco no container */
}

/* =========================
   CARD “Adicionar Novo”
   ========================= */
.card-add {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  overflow: visible; /* permitir pequeno overlap do próximo card */
  position: relative;
  z-index: 3; /* garante que controles fiquem acima do card-list */
}

/* Header do card-add (mantive o gradiente; remova se quiser branco também) */
.card-add .card-header {
  background: linear-gradient(180deg, #000000 0%, #4a4a4a 50%, #667eea 100%);
  padding: 16px 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.card-add .card-header h2 {
  color: #fff;
  font-size: 2rem;
  text-align: center;
  margin: 0;
}

/* Botão “← Voltar” */
.btn-back-dashboard {
  position: absolute;
  left: 24px;
  top: 50%;
  transform: translateY(-50%);
  color: #007bff;
  font-size: 20px;
  text-decoration: none;
  padding: 6px 10px;
  cursor: pointer;
}
.btn-back-dashboard:hover { text-decoration: underline; }

.card-add .card-body {
  padding: var(--card-add-padding-vertical) 16px 8px 16px;
}

/* Grid do form */
.card-add .card-body form {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-gap: 8px 12px;
  align-items: end; /* alinhar inputs e botões ao final */
}

/* FORM ROWS */
.form-row.horizontal {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
  align-items: flex-end;
}

.form-group {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-weight: 600;
  color: #555;
  margin-bottom: 4px;
  font-size: 0.9rem;
}

/* altura dos inputs/seletores */
.form-group input[type="text"],
.form-group select {
  height: var(--input-height);
  padding: 6px 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 0.9rem;
  line-height: 1.2;
  transition: border-color 0.2s;
}
.form-group input[type="text"]:focus,
.form-group select:focus { outline: none; border-color: #007bff; }

/* Botões do form */
.form-row.form-row-submit {
  grid-column: span 2;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 8px;
  margin-top: 8px;
}

/* Botões padrão */
.btn-primary, .btn-secondary {
  padding: 6px 12px;
  font-size: 0.9rem;
}
.btn-primary {
  background-color: #007bff;
  color: #fff;
  border: none;
  padding: 10px 18px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.95rem;
  transition: background-color 0.2s;
}
.btn-primary:hover { background-color: #0056b3; }

.btn-secondary {
  background-color: #6c757d;
  color: #fff;
  text-decoration: none;
  padding: 8px 16px;
  border-radius: 4px;
  font-size: 0.95rem;
  transition: background-color 0.2s;
}
.btn-secondary:hover { background-color: #5a6268; }

.btn-delete-selected {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  background-color: #dc3545;
  color: #fff;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.95rem;
  transition: background-color 0.2s;
}
.btn-delete-selected:hover { background-color: #c82333; }

 /* =========================
   CARD LIST (Tabela)
   ========================= */
.card-list {
  border-radius: 0 0 8px 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  overflow: hidden;
  flex: 1;
  display: flex;
  flex-direction: column;
  margin-top: calc(-1 * var(--card-overlap));
  padding-top: calc(var(--card-overlap) + 8px);
  height: calc(100vh - 120px);
  min-height: 420px;
  position: relative;
  z-index: 1;
}

/* header do card-list */
.card-list .card-header {
  display: flex;
  background-color: #fff; /* cabeçalho branco */
  padding: 8px 16px;
  justify-content: space-between;
  position: relative;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  z-index: 2;
}
.card-list .card-header h2 {
  text-align: center;
  font-size: 1.25rem;
  margin: 0;
  color: #222;
}

/* Interno do card-list */
.card-list .card-body {
  flex: 1;
  overflow: hidden;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  min-height: 360px;
  padding-top: 6px;
}

/* Barra de pesquisa */
.search-container {
  margin-bottom: 8px;
}
.search-container input {
  width: 100%;
  padding: 10px 12px;
  font-size: 0.95rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  transition: border-color 0.2s;
}
.search-container input:focus { outline: none; border-color: #007bff; }

/* Tabela (container com scroll) */
.table-container {
  margin: 0;
  flex: 1;
  overflow-y: auto;
  overflow-x: auto;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  background: #fff;
  padding-right: 6px;
  box-sizing: border-box;
}

/* Tabela em si */
table {
  width: 100%;
  border-collapse: separate;
  background-color: #fff;
}

/* Cabeçalho sticky no topo */
table thead th {
  position: sticky;
  top: 0;
  background-color: #f8f9fa;
  z-index: 100;   /* cabeçalho por cima de tudo */
  box-shadow: 0 2px 4px rgba(0,0,0,0.04);
  border-bottom: 1px solid #e0e0e0;
}

table th,
table td {
  padding: 12px 16px;
  border-bottom: 1px solid #e0e0e0;
  font-size: 0.95rem;
}

/* ====== ALTERAÇÃO SOLICITADA: CENTRALIZAR TÍTULOS E CONTEÚDO DAS CÉLULAS ====== */
table th { color: #333; text-align: center; }
table td { text-align: center; } /* <-- aqui centraliza todo o conteúdo das células */
/* ================================================================== */

table tr:nth-child(even) { background-color: #fbfbfb; }
table tr:hover { background-color: #f1f3f5; }

table .col-actions { width: 140px; text-align: center; }

table .no-data { text-align: center; color: #777; padding: 24px; }

/* Inputs inline */
.input-inline {
  width: 100%;
  padding: 8px 10px;
  font-size: 0.95rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  transition: border-color 0.2s;
  box-sizing: border-box;
  /* alinhamento centralizado por requisição */
  text-align: center;
  min-width: 80px; /* garante um mínimo de largura do input */
}
.input-inline:disabled { background-color: transparent; border-color: transparent; color: #333; cursor: default; }
.input-inline:not(:disabled) { background-color: #fff; }
.input-inline:focus { outline: none; border-color: #007bff; }

/* Aumenta largura mínima da tabela inteira para evitar truncamento */
.table-container table { min-width: 1600px; }

/* =========================
   LARGURAS MÍNIMAS POR COLUNA (ajuste conforme necessário)
   ========================= */

/* Coluna 1 (Data) */
.table-container table thead th:nth-child(1),
.table-container table tbody td:nth-child(1) {
  min-width: 100px;
}

/* OBS: As regras estáticas para as colunas 2/3 foram removidas.
   O posicionamento ('left') será calculado dinamicamente via JS. */

/* Coluna 2 (NF) largura mínima */
.table-container table thead th:nth-child(2),
.table-container table tbody td:nth-child(2) {
  min-width: 180px;
}

/* Coluna 3 (Produto) largura mínima */
.table-container table thead th:nth-child(3),
.table-container table tbody td:nth-child(3) {
  min-width: 260px; /* mais larga para nomes */
}

/* Coluna 4 (Peso Líquido) */
.table-container table thead th:nth-child(4),
.table-container table tbody td:nth-child(4) {
  min-width: 120px;
}
.table-container table tbody td:nth-child(4) .input-inline {
  min-width: 120px;
}

/* Coluna 5 (Qtd Estoque) */
.table-container table thead th:nth-child(5),
.table-container table tbody td:nth-child(5) {
  min-width: 160px;
}
.table-container table tbody td:nth-child(5) .input-inline {
  min-width: 160px;
}

/* Coluna 6 (Qtd Cobre) — a que você pediu especificamente */
.table-container table thead th:nth-child(6),
.table-container table tbody td:nth-child(6) {
  min-width: 180px;
}
.table-container table tbody td:nth-child(6) .input-inline {
  min-width: 180px;
}

/* Coluna 7 (Qtd Zinco) */
.table-container table thead th:nth-child(7),
.table-container table tbody td:nth-child(7) {
  min-width: 140px;
}
.table-container table tbody td:nth-child(7) .input-inline {
  min-width: 140px;
}

/* Coluna 8 (Valor Total NFs) */
.table-container table thead th:nth-child(8),
.table-container table tbody td:nth-child(8) {
  min-width: 200px;
}
.table-container table tbody td:nth-child(8) .input-inline {
  min-width: 200px;
  text-align: center;
}

/* Coluna 9 (Mão de Obra) */
.table-container table thead th:nth-child(9),
.table-container table tbody td:nth-child(9) {
  min-width: 140px;
}
.table-container table tbody td:nth-child(9) .input-inline {
  min-width: 140px;
}

/* Coluna 10 (Matéria Prima) */
.table-container table thead th:nth-child(10),
.table-container table tbody td:nth-child(10) {
  min-width: 140px;
}
.table-container table tbody td:nth-child(10) .input-inline {
  min-width: 140px;
}

/* Coluna 11 (Custo Total Manual) */
.table-container table thead th:nth-child(11),
.table-container table tbody td:nth-child(11) {
  min-width: 180px;
}
.table-container table tbody td:nth-child(11) .input-inline {
  min-width: 180px;
}

/* Coluna 12 (Custo Total) */
.table-container table thead th:nth-child(12),
.table-container table tbody td:nth-child(12) {
  min-width: 180px;
}
.table-container table tbody td:nth-child(12) .input-inline {
  min-width: 180px;
}

/* Coluna 13 (Ações) */
.table-container table thead th:nth-child(13),
.table-container table tbody td:nth-child(13) {
  width: 140px;
  text-align: center;
}

.table-container table tbody td {
  z-index: 1;
  background: transparent; /* deixa o background visível apenas nos stickies */
}

/* =========================
   BASE PARA STICKY COLUMNS (JS define left/z-index)
   ========================= */
.table-container table thead th.sticky-col,
.table-container table tbody td.sticky-col {
  position: sticky; /* o left será definido pelo JS inline */
  background-clip: padding-box;
  box-shadow: none;
  background-clip: padding-box;
  /* reforça fundo para sobrepor qualquer coisa abaixo */
  background-color: #fff;
}

.table-container table thead th.sticky-col {
  z-index: 220; /* header sticky deve ficar acima das células do corpo */
  background: #f8f9fa;
}

.table-container table tbody td.sticky-col {
  z-index: 120;
  background: #fff;
}

/* =========================
   FIM DAS ALTERAÇÕES DE LARGURA
   ========================= */

/* Ícones */
.icon {
  font-size: 1rem;
  margin: 0 6px;
  cursor: pointer;
  transition: transform 0.1s;
  background: transparent;
  border: none;
}
.icon:hover { transform: scale(1.1); }
.edit-icon { color: #007bff; }
.save-icon { color: #28a745; }
.delete-icon { color: #dc3545; }
.hidden { display: none; }

/* Responsividade */
@media (max-width: 600px) {
  .form-row.horizontal { flex-direction: column; align-items: stretch; }
  .form-group label { margin-bottom: 4px; }
  table th, table td { padding: 10px 12px; }
  .icon { margin: 0 4px; font-size: 1rem; }
}

/* Flash messages */
.flash-messages { margin-bottom: 8px; }
.flash {
  padding: 10px 14px;
  margin-bottom: 8px;
  border-radius: 4px;
  font-size: 0.95rem;
}
.flash.sucesso { background-color: #e6ffed; border-left: 4px solid #28a745; color: #155724; }
.flash.erro { background-color: #ffe6e6; border-left: 4px solid #dc3545; color: #721c24; }
.flash.info { background-color: #e6f0ff; border-left: 4px solid #007bff; color: #004085; }

/* layout page-controls */
.page-controls {
  display: flex;
  gap: 12px;
  align-items: center;
  width: 100%;
  margin: 8px 0;
}
.page-controls .search-container { flex: 1; }

/* evita quebra de linha nas células */
.table-container table,
.table-container table th,
.table-container table td {
  white-space: nowrap;
}

/* =======================
   BOTÕES AO LADO DO CAMPO QUANTIDADE
   ======================= */
.form-actions-inline {
  display: flex;
  gap: 8px;
  align-items: center;
  padding-left: 8px;
  margin-left: auto;
}

/* botão quadrado (mais/menos) */
.btn-icon {
  width: 46px;
  height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  border: 2px solid #dc3545;
  background: transparent;
  border-radius: 4px;
  cursor: pointer;
  line-height: 1;
}
.btn-icon:hover { transform: scale(1.04); }

/* histórico/exportar (botões secundários compactos) */
.form-actions-inline .btn-secondary { padding: 6px 10px; font-size: 0.9rem; }

/* responsividade para o bloco de botões */
@media (max-width: 860px) {
  .form-actions-inline { gap: 6px; align-items: center; }
  .form-actions-inline .btn-icon { width: 40px; height: 32px; }
  .form-row.horizontal { flex-wrap: wrap; }
}

/* =========================
   REMOÇÕES / CORREÇÕES DE LINHAS E FOCOS
   ========================= */

.card-list :focus,
.card-add :focus,
.card-list .card-header :focus,
.card-add .card-body :focus,
input:focus,
textarea:focus,
select:focus,
button:focus,
a:focus {
  outline: none !important;
  box-shadow: none !important;
}

.card-list .card-header,
.table-container {
  background: #fff !important;
  border-top: none !important;
  box-shadow: none !important;
}

.card-list,
.card-list .card-header,
.card-add {
  border-top: 0 !important;
  border-bottom: 0 !important;
  border-left: 0 !important;
  border-right: 0 !important;
  border-color: transparent !important;
}

.card-list::before,
.card-list::after,
.card-add::before,
.card-add::after,
.card-list .card-header::before,
.card-list .card-header::after {
  content: none !important;
  display: none !important;
}

#calc-nfs-page hr,
.card-list hr,
.card-add hr {
  display: none !important;
}

/* corrige autofill do Chrome (mantém fundo branco visual) */
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
  -webkit-box-shadow: 0 0 0px 1000px #fff inset !important;
  box-shadow: 0 0 0px 1000px #fff inset !important;
  -webkit-text-fill-color: #000 !important;
}

.linha-alterada {
  background-color: #ffff99 !important;
  transition: background-color 0.3s;
}

.linha-alterada td,
.linha-alterada td.sticky-col {
  background-color: #ffff99 !important;
}
